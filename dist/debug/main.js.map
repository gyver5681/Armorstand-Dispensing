{"version":3,"sources":["../../scripts/main.ts"],"sourcesContent":["import {\n  world,\n  EntitySpawnAfterEvent,\n  EntityItemComponent,\n  EntityComponentTypes,\n  Vector2,\n  Vector3,\n} from \"@minecraft/server\";\n\n// Velocity Bounds Constants. These were determined via running and logging 18 stacks of armor stands through dispensers in various orientations to get an approximate max and min velocity for each orientation.\nconst Bounds = {\n  north: {\n    min: { x: -0.14197, y: 0, z: 0 } as Vector3,\n    max: { x: 0.14512, y: 0.28822, z: 0.44923 } as Vector3,\n  },\n  south: {\n    min: { x: -0.14084, y: 0, z: -0.43568 } as Vector3,\n    max: { x: 0.15107, y: 0.28823, z: 0 } as Vector3,\n  },\n  east: {\n    min: { x: -0.44638, y: 0, z: -0.13491 } as Vector3,\n    max: { x: 0, y: 0.28697, z: 0.11382 } as Vector3,\n  },\n  west: {\n    min: { x: 0, y: -0.00368, z: -0.16915 } as Vector3,\n    max: { x: 0.41064, y: 0.34748, z: 0.13619 } as Vector3,\n  },\n  above: {\n    min: { x: -0.13535, y: 0, z: -0.18908 } as Vector3,\n    max: { x: 0.14192, y: 0.26345, z: 0.12336 } as Vector3,\n  },\n  below: {\n    min: { x: 0, y: 0, z: 0 } as Vector3,\n    max: { x: 0, y: 0, z: 0 } as Vector3,\n  },\n};\n\nfunction v3CheckBounds(bounds: { min: Vector3; max: Vector3 }, velocity: Vector3): boolean {\n  return (\n    bounds.min.x < velocity.x &&\n    velocity.x < bounds.max.x &&\n    bounds.min.y < velocity.y &&\n    velocity.y < bounds.max.y &&\n    bounds.min.z < velocity.z &&\n    velocity.z < bounds.max.z\n  );\n}\n\nworld.afterEvents.entitySpawn.subscribe((event: EntitySpawnAfterEvent) => {\n  let myentity = event.entity;\n  try {\n    if (myentity) {\n      const itemComp = myentity.getComponent(EntityComponentTypes.Item) as EntityItemComponent | undefined;\n      if (itemComp) {\n        if (itemComp.itemStack.typeId === \"minecraft:armor_stand\") {\n          const spawnDimension = myentity.dimension;\n          const spawnLocation = myentity.location;\n          const spawnVelocity = myentity.getVelocity();\n          let dispensedStand: boolean = false;\n          let StandRotation: Vector2 = { x: 0, y: 270 };\n          const spawnBlock = spawnDimension.getBlock(spawnLocation);\n          if (spawnBlock) {\n            if (!dispensedStand) {\n              const testBlock = spawnBlock.north(1);\n              if (\n                testBlock &&\n                testBlock.matches(\"minecraft:dispenser\", { facing_direction: 3 }) &&\n                v3CheckBounds(Bounds.north, spawnVelocity)\n              ) {\n                dispensedStand = true;\n                StandRotation.y = 0;\n              }\n            }\n            if (!dispensedStand) {\n              const testBlock = spawnBlock.south(1);\n              if (\n                testBlock &&\n                testBlock.matches(\"minecraft:dispenser\", { facing_direction: 2 }) &&\n                v3CheckBounds(Bounds.south, spawnVelocity)\n              ) {\n                dispensedStand = true;\n                StandRotation.y = 180;\n              }\n            }\n            if (!dispensedStand) {\n              const testBlock = spawnBlock.east(1);\n              if (\n                testBlock &&\n                testBlock.matches(\"minecraft:dispenser\", { facing_direction: 4 }) &&\n                v3CheckBounds(Bounds.east, spawnVelocity)\n              ) {\n                dispensedStand = true;\n                StandRotation.y = 90;\n              }\n            }\n            if (!dispensedStand) {\n              const testBlock = spawnBlock.west(1);\n              if (\n                testBlock &&\n                testBlock.matches(\"minecraft:dispenser\", { facing_direction: 5 }) &&\n                v3CheckBounds(Bounds.west, spawnVelocity)\n              ) {\n                dispensedStand = true;\n              }\n            }\n            if (!dispensedStand) {\n              const testBlock = spawnBlock.above(1);\n              if (\n                testBlock &&\n                testBlock.matches(\"minecraft:dispenser\", { facing_direction: 0 }) &&\n                v3CheckBounds(Bounds.above, spawnVelocity)\n              ) {\n                dispensedStand = true;\n              }\n            }\n            if (!dispensedStand) {\n              const testBlock = spawnBlock.below(1);\n              if (\n                testBlock &&\n                testBlock.matches(\"minecraft:dispenser\", { facing_direction: 1 }) &&\n                spawnVelocity.x === 0 &&\n                spawnVelocity.y === 0 &&\n                spawnVelocity.z === 0\n              ) {\n                dispensedStand = true;\n              }\n            }\n          }\n          if (dispensedStand) {\n            spawnDimension.spawnEntity(\"minecraft:armor_stand\", spawnLocation).setRotation(StandRotation);\n            myentity.kill();\n          }\n        }\n      }\n    }\n  } catch (e) {\n    console.warn((e as Error).message);\n  }\n});\n"],"mappings":"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","names":[],"file":"../scripts/main.js"}